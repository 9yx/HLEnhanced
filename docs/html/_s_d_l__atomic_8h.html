<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Half-Life Enhanced: external/SDL2/include/SDL2/SDL_atomic.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Half-Life Enhanced
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Enhanced Half-Life SDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_s_d_l__atomic_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SDL_atomic.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_s_d_l__stdinc_8h_source.html">SDL_stdinc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_s_d_l__platform_8h_source.html">SDL_platform.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="begin__code_8h_source.html">begin_code.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="close__code_8h_source.html">close_code.h</a>&quot;</code><br />
</div>
<p><a href="_s_d_l__atomic_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_d_l__atomic__t.html">SDL_atomic_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A type representing an atomic integer value. It is a struct so people don't accidentally use numeric operations on it.  <a href="struct_s_d_l__atomic__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8309455d9dfa65473d10989448c5b897"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a8309455d9dfa65473d10989448c5b897">SDL_CompilerBarrier</a>()  &#160;&#160;&#160;{ <a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a> _tmp = 0; <a class="el" href="_s_d_l__atomic_8h.html#a95ecd72190ba8e5ed6ed78d5d1b36509">SDL_AtomicLock</a>(&amp;_tmp); <a class="el" href="_s_d_l__atomic_8h.html#a3fb14c56b17347349ac2fb5300205bac">SDL_AtomicUnlock</a>(&amp;_tmp); }</td></tr>
<tr class="separator:a8309455d9dfa65473d10989448c5b897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d39079415c1bb2be789ddea3b2966f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#af0d39079415c1bb2be789ddea3b2966f">SDL_AtomicSet</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>,  <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)      &#160;&#160;&#160;__sync_lock_test_and_set(&amp;(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)-&gt;<a class="el" href="_s_d_l__opengl_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>, <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)</td></tr>
<tr class="separator:af0d39079415c1bb2be789ddea3b2966f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a642cbfaec896d9c8d0eaea55916e62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a3a642cbfaec896d9c8d0eaea55916e62">SDL_AtomicAdd</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>,  <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)      &#160;&#160;&#160;__sync_fetch_and_add(&amp;(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)-&gt;<a class="el" href="_s_d_l__opengl_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>, <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)</td></tr>
<tr class="separator:a3a642cbfaec896d9c8d0eaea55916e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2918e2fc724055dfb811b1ab309e8f2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a2918e2fc724055dfb811b1ab309e8f2b">SDL_AtomicSetPtr</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>,  <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)&#160;&#160;&#160;__sync_lock_test_and_set(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)</td></tr>
<tr class="separator:a2918e2fc724055dfb811b1ab309e8f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c1bc348e51f4fc29b2e9e1e182db41"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#aa8c1bc348e51f4fc29b2e9e1e182db41">SDL_AtomicCAS</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>,  oldval,  newval)&#160;&#160;&#160;__sync_bool_compare_and_swap(&amp;(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)-&gt;<a class="el" href="_s_d_l__opengl_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>, oldval, newval)</td></tr>
<tr class="separator:aa8c1bc348e51f4fc29b2e9e1e182db41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0858930060a22ac2dbac07a494a7e4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#adc0858930060a22ac2dbac07a494a7e4">SDL_AtomicCASPtr</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>,  oldval,  newval)&#160;&#160;&#160;__sync_bool_compare_and_swap(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, oldval, newval)</td></tr>
<tr class="separator:adc0858930060a22ac2dbac07a494a7e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd97261d7a59b9a84e6ff894d6e9c87"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#abdd97261d7a59b9a84e6ff894d6e9c87">SDL_AtomicIncRef</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)    &#160;&#160;&#160;<a class="el" href="_s_d_l__atomic_8h.html#a3a642cbfaec896d9c8d0eaea55916e62">SDL_AtomicAdd</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, 1)</td></tr>
<tr class="memdesc:abdd97261d7a59b9a84e6ff894d6e9c87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add to an atomic variable.  <a href="#abdd97261d7a59b9a84e6ff894d6e9c87">More...</a><br /></td></tr>
<tr class="separator:abdd97261d7a59b9a84e6ff894d6e9c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a062ae367634ba0d83ef4bb88f1fed0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a9a062ae367634ba0d83ef4bb88f1fed0">SDL_AtomicDecRef</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)    &#160;&#160;&#160;(<a class="el" href="_s_d_l__atomic_8h.html#a3a642cbfaec896d9c8d0eaea55916e62">SDL_AtomicAdd</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, -1) == 1)</td></tr>
<tr class="memdesc:a9a062ae367634ba0d83ef4bb88f1fed0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrement an atomic variable used as a reference count.  <a href="#a9a062ae367634ba0d83ef4bb88f1fed0">More...</a><br /></td></tr>
<tr class="separator:a9a062ae367634ba0d83ef4bb88f1fed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a21b38f9ad48cc2789242f69dc0c80ec7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="begin__code_8h.html#addf1f12c70f89102cc187297860c5961">SDL_FORCE_INLINE</a> <a class="el" href="_s_d_l__thread_8h.html#a6a64f9be4433e4de6e2f2f548cf3c08e">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a21b38f9ad48cc2789242f69dc0c80ec7">SDL_AtomicGet</a> (<a class="el" href="struct_s_d_l__atomic__t.html">SDL_atomic_t</a> *<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)</td></tr>
<tr class="memdesc:a21b38f9ad48cc2789242f69dc0c80ec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an atomic variable to a new value if it is currently an old value.  <a href="#a21b38f9ad48cc2789242f69dc0c80ec7">More...</a><br /></td></tr>
<tr class="separator:a21b38f9ad48cc2789242f69dc0c80ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1c91f3e9f81f596f62d1424920282ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="begin__code_8h.html#addf1f12c70f89102cc187297860c5961">SDL_FORCE_INLINE</a> <a class="el" href="_s_d_l__opengl_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#af1c91f3e9f81f596f62d1424920282ec">SDL_AtomicGetPtr</a> (<a class="el" href="_s_d_l__opengl_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> **<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)</td></tr>
<tr class="memdesc:af1c91f3e9f81f596f62d1424920282ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a pointer to a new value if it is currently an old value.  <a href="#af1c91f3e9f81f596f62d1424920282ec">More...</a><br /></td></tr>
<tr class="separator:af1c91f3e9f81f596f62d1424920282ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
SDL AtomicLock</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpd7e348d61fe61536e787424b5d2866ed"></a>The atomic locks are efficient spinlocks using CPU instructions, but are vulnerable to starvation and can spin forever if a thread holding a lock has been terminated. For this reason you should minimize the code executed inside an atomic lock and never do expensive things like API or system calls while holding them.</p>
<p>The atomic locks are not safe to lock recursively.</p>
<p>Porting Note: The spin lock functions and type are required and can not be emulated because they are used in the atomic emulation code. </p>
</td></tr>
<tr class="memitem:a59179ff8d21c65b9d9a544f3c2088e81"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_s_d_l__thread_8h.html#a6a64f9be4433e4de6e2f2f548cf3c08e">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a></td></tr>
<tr class="separator:a59179ff8d21c65b9d9a544f3c2088e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5410c5f832f0d862282cd65fc432fc0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="begin__code_8h.html#aa4c7a931f4a968f818b2a1b10a432185">DECLSPEC</a> <a class="el" href="_s_d_l__stdinc_8h.html#a8fca68df0f976765230fe589a7c7733b">SDL_bool</a> <a class="el" href="begin__code_8h.html#a81faf4ba0455dc75f2e0507eddb79401">SDLCALL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a5410c5f832f0d862282cd65fc432fc0b">SDL_AtomicTryLock</a> (<a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a> *lock)</td></tr>
<tr class="memdesc:a5410c5f832f0d862282cd65fc432fc0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock a spin lock by setting it to a non-zero value.  <a href="#a5410c5f832f0d862282cd65fc432fc0b">More...</a><br /></td></tr>
<tr class="separator:a5410c5f832f0d862282cd65fc432fc0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95ecd72190ba8e5ed6ed78d5d1b36509"><td class="memItemLeft" align="right" valign="top"><a class="el" href="begin__code_8h.html#aa4c7a931f4a968f818b2a1b10a432185">DECLSPEC</a> <a class="el" href="_s_d_l__opengl_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> <a class="el" href="begin__code_8h.html#a81faf4ba0455dc75f2e0507eddb79401">SDLCALL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a95ecd72190ba8e5ed6ed78d5d1b36509">SDL_AtomicLock</a> (<a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a> *lock)</td></tr>
<tr class="memdesc:a95ecd72190ba8e5ed6ed78d5d1b36509"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock a spin lock by setting it to a non-zero value.  <a href="#a95ecd72190ba8e5ed6ed78d5d1b36509">More...</a><br /></td></tr>
<tr class="separator:a95ecd72190ba8e5ed6ed78d5d1b36509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fb14c56b17347349ac2fb5300205bac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="begin__code_8h.html#aa4c7a931f4a968f818b2a1b10a432185">DECLSPEC</a> <a class="el" href="_s_d_l__opengl_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> <a class="el" href="begin__code_8h.html#a81faf4ba0455dc75f2e0507eddb79401">SDLCALL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_l__atomic_8h.html#a3fb14c56b17347349ac2fb5300205bac">SDL_AtomicUnlock</a> (<a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a> *lock)</td></tr>
<tr class="memdesc:a3fb14c56b17347349ac2fb5300205bac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock a spin lock by setting it to 0. Always returns immediately.  <a href="#a3fb14c56b17347349ac2fb5300205bac">More...</a><br /></td></tr>
<tr class="separator:a3fb14c56b17347349ac2fb5300205bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Atomic operations.</p>
<p>IMPORTANT: If you are not an expert in concurrent lockless programming, you should only be using the atomic lock and reference counting functions in this file. In all other cases you should be protecting your data structures with full mutexes.</p>
<p>The list of "safe" functions to use are: <a class="el" href="_s_d_l__atomic_8h.html#a95ecd72190ba8e5ed6ed78d5d1b36509" title="Lock a spin lock by setting it to a non-zero value. ">SDL_AtomicLock()</a> <a class="el" href="_s_d_l__atomic_8h.html#a3fb14c56b17347349ac2fb5300205bac" title="Unlock a spin lock by setting it to 0. Always returns immediately. ">SDL_AtomicUnlock()</a> <a class="el" href="_s_d_l__atomic_8h.html#abdd97261d7a59b9a84e6ff894d6e9c87" title="Add to an atomic variable. ">SDL_AtomicIncRef()</a> <a class="el" href="_s_d_l__atomic_8h.html#a9a062ae367634ba0d83ef4bb88f1fed0" title="Decrement an atomic variable used as a reference count. ">SDL_AtomicDecRef()</a></p>
<p>Seriously, here be dragons! ^^^^^^^^^^^^^^^^^^^^^^^^^^^</p>
<p>You can find out a little more about lockless programming and the subtle issues that can arise here: <a href="http://msdn.microsoft.com/en-us/library/ee418650%28v=vs.85%29.aspx">http://msdn.microsoft.com/en-us/library/ee418650%28v=vs.85%29.aspx</a></p>
<p>There's also lots of good information here: <a href="http://www.1024cores.net/home/lock-free-algorithms">http://www.1024cores.net/home/lock-free-algorithms</a></p>
<p>These operations may or may not actually be implemented using processor specific atomic operations. When possible they are implemented as true processor specific atomic operations. When that is not possible the are implemented using locks that <em>do</em> use the available atomic operations.</p>
<p>All of the atomic operations that modify memory are full memory barriers. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a3a642cbfaec896d9c8d0eaea55916e62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDL_AtomicAdd</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;__sync_fetch_and_add(&amp;(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)-&gt;<a class="el" href="_s_d_l__opengl_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>, <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa8c1bc348e51f4fc29b2e9e1e182db41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDL_AtomicCAS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">oldval, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">newval&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;__sync_bool_compare_and_swap(&amp;(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)-&gt;<a class="el" href="_s_d_l__opengl_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>, oldval, newval)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adc0858930060a22ac2dbac07a494a7e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDL_AtomicCASPtr</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">oldval, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">newval&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;__sync_bool_compare_and_swap(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, oldval, newval)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a062ae367634ba0d83ef4bb88f1fed0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDL_AtomicDecRef</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="_s_d_l__atomic_8h.html#a3a642cbfaec896d9c8d0eaea55916e62">SDL_AtomicAdd</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, -1) == 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrement an atomic variable used as a reference count. </p>
<dl class="section return"><dt>Returns</dt><dd>SDL_TRUE if the variable reached zero after decrementing, SDL_FALSE otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="abdd97261d7a59b9a84e6ff894d6e9c87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDL_AtomicIncRef</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="_s_d_l__atomic_8h.html#a3a642cbfaec896d9c8d0eaea55916e62">SDL_AtomicAdd</a>(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add to an atomic variable. </p>
<dl class="section return"><dt>Returns</dt><dd>The previous value of the atomic variable.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This same style can be used for any number operation Increment an atomic variable used as a reference count. </dd></dl>

</div>
</div>
<a class="anchor" id="af0d39079415c1bb2be789ddea3b2966f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDL_AtomicSet</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;__sync_lock_test_and_set(&amp;(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)-&gt;<a class="el" href="_s_d_l__opengl_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>, <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2918e2fc724055dfb811b1ab309e8f2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDL_AtomicSetPtr</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;__sync_lock_test_and_set(<a class="el" href="_s_d_l__opengl_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, <a class="el" href="_s_d_l__opengl_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8309455d9dfa65473d10989448c5b897"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDL_CompilerBarrier</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;{ <a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a> _tmp = 0; <a class="el" href="_s_d_l__atomic_8h.html#a95ecd72190ba8e5ed6ed78d5d1b36509">SDL_AtomicLock</a>(&amp;_tmp); <a class="el" href="_s_d_l__atomic_8h.html#a3fb14c56b17347349ac2fb5300205bac">SDL_AtomicUnlock</a>(&amp;_tmp); }</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The compiler barrier prevents the compiler from reordering reads and writes to globally visible variables across the call. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a59179ff8d21c65b9d9a544f3c2088e81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_s_d_l__thread_8h.html#a6a64f9be4433e4de6e2f2f548cf3c08e">int</a> <a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a21b38f9ad48cc2789242f69dc0c80ec7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="begin__code_8h.html#addf1f12c70f89102cc187297860c5961">SDL_FORCE_INLINE</a> <a class="el" href="_s_d_l__thread_8h.html#a6a64f9be4433e4de6e2f2f548cf3c08e">int</a> SDL_AtomicGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_d_l__atomic__t.html">SDL_atomic_t</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set an atomic variable to a new value if it is currently an old value. </p>
<dl class="section return"><dt>Returns</dt><dd>SDL_TRUE if the atomic variable was set, SDL_FALSE otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If you don't know what this function is for, you shouldn't use it! Set an atomic variable to a value.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The previous value of the atomic variable. Get the value of an atomic variable </dd></dl>

</div>
</div>
<a class="anchor" id="af1c91f3e9f81f596f62d1424920282ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="begin__code_8h.html#addf1f12c70f89102cc187297860c5961">SDL_FORCE_INLINE</a> <a class="el" href="_s_d_l__opengl_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>* SDL_AtomicGetPtr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_d_l__opengl_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> **&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a pointer to a new value if it is currently an old value. </p>
<dl class="section return"><dt>Returns</dt><dd>SDL_TRUE if the pointer was set, SDL_FALSE otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If you don't know what this function is for, you shouldn't use it! Set a pointer to a value atomically.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The previous value of the pointer. Get the value of a pointer atomically. </dd></dl>

</div>
</div>
<a class="anchor" id="a95ecd72190ba8e5ed6ed78d5d1b36509"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="begin__code_8h.html#aa4c7a931f4a968f818b2a1b10a432185">DECLSPEC</a> <a class="el" href="_s_d_l__opengl_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> <a class="el" href="begin__code_8h.html#a81faf4ba0455dc75f2e0507eddb79401">SDLCALL</a> SDL_AtomicLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock a spin lock by setting it to a non-zero value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lock</td><td>Points to the lock. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5410c5f832f0d862282cd65fc432fc0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="begin__code_8h.html#aa4c7a931f4a968f818b2a1b10a432185">DECLSPEC</a> <a class="el" href="_s_d_l__stdinc_8h.html#a8fca68df0f976765230fe589a7c7733b">SDL_bool</a> <a class="el" href="begin__code_8h.html#a81faf4ba0455dc75f2e0507eddb79401">SDLCALL</a> SDL_AtomicTryLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to lock a spin lock by setting it to a non-zero value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lock</td><td>Points to the lock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SDL_TRUE if the lock succeeded, SDL_FALSE if the lock is already held. </dd></dl>

</div>
</div>
<a class="anchor" id="a3fb14c56b17347349ac2fb5300205bac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="begin__code_8h.html#aa4c7a931f4a968f818b2a1b10a432185">DECLSPEC</a> <a class="el" href="_s_d_l__opengl_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> <a class="el" href="begin__code_8h.html#a81faf4ba0455dc75f2e0507eddb79401">SDLCALL</a> SDL_AtomicUnlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_d_l__atomic_8h.html#a59179ff8d21c65b9d9a544f3c2088e81">SDL_SpinLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock a spin lock by setting it to 0. Always returns immediately. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lock</td><td>Points to the lock. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_397d9aeee4af8edecac90968d93b57df.html">external</a></li><li class="navelem"><a class="el" href="dir_05830384a3fd7955132a2fda11757325.html">SDL2</a></li><li class="navelem"><a class="el" href="dir_acb9fed264e69c2defac807f5fdc1432.html">include</a></li><li class="navelem"><a class="el" href="dir_449afaecb151bdb3db5aff2c905b5a14.html">SDL2</a></li><li class="navelem"><a class="el" href="_s_d_l__atomic_8h.html">SDL_atomic.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
